<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Tasks • mlr3</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Tasks">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-01-tasks.html">Tasks</a>
    </li>
    <li>
      <a href="../articles/basic-02-learners.html">Learners</a>
    </li>
    <li>
      <a href="../articles/basic-03-experiments.html">Experiments</a>
    </li>
    <li>
      <a href="../articles/basic-04-resample-benchmark.html">Resampling</a>
    </li>
    <li>
      <a href="../articles/basic-05-parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../articles/basic-06-error-handling.html">Error handling</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../news/index.html">News</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr3">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Tasks</h1>
                        <h4 class="author">mlr-org team</h4>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#task-creation">Task Creation</a></li>
      <li><a href="#predefined-tasks">Predefined tasks</a></li>
      <li>
<a href="#task-api">Task API</a><ul>
<li><a href="#retrieve-data">Retrieve Data</a></li>
      <li><a href="#roles">Roles</a></li>
      <li><a href="#task-mutators">Task Mutators</a></li>
      </ul>
</li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr3/blob/master/vignettes/basic-01-tasks.Rmd"><code>vignettes/basic-01-tasks.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<div id="prerequisites" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(mlr3)</a></code></pre></div>
<p>Learning tasks encapsulate the data set and additional meta information about a machine learning problem, for example the name of the target variable for supervised problems.</p>
</div>
<div id="task-creation" class="section level2">
<h2 class="hasAnchor">
<a href="#task-creation" class="anchor"></a>Task Creation</h2>
<p>To manually create a task from a <code><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame()</a></code> or <code><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table()</a></code>, you must first determine the task type to select the respective constructor:</p>
<ul>
<li>Classification Task: Target column is labels (stored as <code>character</code>/<code>factor</code>) with only few distinct values. <br><span class="math inline">\(\Rightarrow\)</span> <code><a href="../reference/TaskClassif.html">mlr3::TaskClassif</a></code>.</li>
<li>Regression Task: Target column is numeric (stored as <code>integer</code>/<code>double</code>). <br><span class="math inline">\(\Rightarrow\)</span> <code><a href="../reference/TaskRegr.html">mlr3::TaskRegr</a></code>.</li>
<li>Cluster Task: You don’t have a target but want to identify similarities in the feature space. <br><span class="math inline">\(\Rightarrow\)</span> Not yet implemented.</li>
<li>Survival Task: Target is the (right-censored) time to event. <br><span class="math inline">\(\Rightarrow\)</span> <code>TaskSurvival</code> in add-on package <a href="http://mlr3survival.mlr-org.com"><code>mlr3surival</code></a>.</li>
<li>Ordinal Regression Task: Target is ordinal <br><span class="math inline">\(\Rightarrow\)</span> <code>TaskOrdinal</code> in add-on package <a href="https://github.com/mlr-org/mlr3ordinal"><code>mlr3ordinal</code></a>.</li>
</ul>
<p>Let’s assume we want to create a simple regression task using the <code>mtcars</code> data set from the package <code>datasets</code> to predict the column <code>"mpg"</code> (miles per gallon). We only take the first two features here to keep the output in the following examples short.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"mtcars"</span>, <span class="dt">package =</span> <span class="st">"datasets"</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">data =<span class="st"> </span>mtcars[, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(data)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt; 'data.frame':    32 obs. of  3 variables:</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  $ disp: num  160 160 108 258 360 ...</span></a></code></pre></div>
<p>Next, we create the task by providing</p>
<ol style="list-style-type: decimal">
<li>
<code>id</code>: identifier for the task, used in plots and summaries</li>
<li>
<code>backend</code>: here, we simply provide the <code><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame()</a></code> which is internally converted to a <code><a href="../reference/DataBackendDataTable.html">mlr3::DataBackendDataTable</a></code>. For more fine-grain control over how the data is stored internally, we could also construct a <code><a href="../reference/DataBackend.html">mlr3::DataBackend</a></code> manually.</li>
<li>
<code>target</code>: Column name of the target column for the regression problem.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">task_mtcars =<span class="st"> </span>TaskRegr<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"cars"</span>, <span class="dt">backend =</span> data, <span class="dt">target =</span> <span class="st">"mpg"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(task_mtcars)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; &lt;TaskRegr:cars&gt; (32 x 3)</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">#&gt; Target: mpg</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; Features (2):</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; * dbl (2): cyl, disp</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; Public: backend, cbind(), clone(), col_info, col_roles,</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;   data_formats, data(), droplevels(), feature_names,</span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;   feature_types, filter(), formula(), groups, hash, head(), id,</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;   levels(), measures, missings(), ncol, nrow, properties, rbind(),</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;   replace_features(), row_ids, row_roles, select(),</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;   set_col_role(), set_row_role(), target_names, task_type,</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt;   truth(), weights</span></a></code></pre></div>
<p>The <code><a href="https://www.rdocumentation.org/packages/base/topics/print">print()</a></code> method gives a short summary of the task: It has 32 observations, 3 columns of which 2 columns are features.</p>
</div>
<div id="predefined-tasks" class="section level2">
<h2 class="hasAnchor">
<a href="#predefined-tasks" class="anchor"></a>Predefined tasks</h2>
<p><code>mlr3</code> ships with some predefined machine learning tasks. These are stored in a <code><a href="../reference/Dictionary.html">mlr3::Dictionary</a></code>, which is a simple key-value store named <code><a href="../reference/mlr_tasks.html">mlr3::mlr_tasks</a></code>. We can obtain a summarizing overview of all stored tasks by converting the dictionary to a <code><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table()</a></code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="../reference/as.data.table.html">as.data.table</a></span>(mlr_tasks)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt;       key task_type     measures  nrow  ncol   lgl   int   dbl   chr   fct</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt;    &lt;char&gt;    &lt;char&gt;       &lt;list&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; 1:     bh      regr     regr.mse   506    19     0     3    13     0     2</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; 2:   iris   classif classif.mmce   150     5     0     0     4     0     0</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 3: mtcars      regr     regr.mse    32    11     0     0    10     0     0</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 4:   pima   classif classif.mmce   768     9     0     0     8     0     0</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 5:  sonar   classif classif.mmce   208    61     0     0    60     0     0</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 6:   spam   classif classif.mmce  4601    58     0     0    57     0     0</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 7:    zoo   classif classif.mmce   101    17    15     1     0     0     0</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt;      ord</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 1:     0</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; 2:     0</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; 3:     0</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; 4:     0</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt; 5:     0</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt; 6:     0</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; 7:     0</span></a></code></pre></div>
<p>For illustration purposes, we now retrieve the popular <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set">iris data set</a> from <code>mlr_tasks</code> as a classification task:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">task_iris =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"iris"</span>)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(task_iris)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt; &lt;TaskClassif:iris&gt; (150 x 5)</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt; Target: Species</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; Features (4):</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; * dbl (4): Petal.Length, Petal.Width, Sepal.Length, Sepal.Width</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; Public: backend, cbind(), class_n, class_names, clone(),</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt;   col_info, col_roles, data_formats, data(), droplevels(),</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;   feature_names, feature_types, filter(), formula(), groups, hash,</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;   head(), id, levels(), measures, missings(), ncol, negative,</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt;   nrow, positive, properties, rbind(), replace_features(),</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt;   row_ids, row_roles, select(), set_col_role(), set_row_role(),</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt;   target_names, task_type, truth(), weights</span></a></code></pre></div>
</div>
<div id="task-api" class="section level2">
<h2 class="hasAnchor">
<a href="#task-api" class="anchor"></a>Task API</h2>
<p>The task properties and characteristics can be queried using the task’s public member values and methods (see <code><a href="../reference/Task.html">?mlr3::Task</a></code>). Most of them should be self-explanatory, e.g.,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">task_iris =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"iris"</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co"># public member values</span></a>
<a class="sourceLine" id="cb6-4" title="4">task_iris<span class="op">$</span>nrow</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt; [1] 150</span></a>
<a class="sourceLine" id="cb6-6" title="6">task_iris<span class="op">$</span>ncol</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co"># public member methods</span></a>
<a class="sourceLine" id="cb6-10" title="10">task_iris<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dt">n =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt;    Species Petal.Length Petal.Width Sepal.Length Sepal.Width</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;     &lt;fctr&gt;        &lt;num&gt;       &lt;num&gt;        &lt;num&gt;       &lt;num&gt;</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt; 1:  setosa          1.4         0.2          5.1         3.5</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt; 2:  setosa          1.4         0.2          4.9         3.0</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; 3:  setosa          1.3         0.2          4.7         3.2</span></a></code></pre></div>
<div id="retrieve-data" class="section level3">
<h3 class="hasAnchor">
<a href="#retrieve-data" class="anchor"></a>Retrieve Data</h3>
<p>In <code>mlr3</code>, each row (observation) has a unique identifier which can be either <code><a href="https://www.rdocumentation.org/packages/base/topics/integer">integer()</a></code> or <code><a href="https://www.rdocumentation.org/packages/base/topics/character">character()</a></code>. These can be used to select specific rows.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># iris uses integer row_ids</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(task_iris<span class="op">$</span>row_ids)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#&gt; [1] 1 2 3 4 5 6</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co"># retrieve data for rows with ids 1, 51, and 101</span></a>
<a class="sourceLine" id="cb7-6" title="6">task_iris<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="dt">rows =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">51</span>, <span class="dv">101</span>))</a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;       Species Petal.Length Petal.Width Sepal.Length Sepal.Width</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt;        &lt;fctr&gt;        &lt;num&gt;       &lt;num&gt;        &lt;num&gt;       &lt;num&gt;</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt; 1:     setosa          1.4         0.2          5.1         3.5</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt; 2: versicolor          4.7         1.4          7.0         3.2</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt; 3:  virginica          6.0         2.5          6.3         3.3</span></a>
<a class="sourceLine" id="cb7-12" title="12"></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co"># mtcars uses the rownames of the original data set</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(task_mtcars<span class="op">$</span>row_ids)</a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt; [1] "AMC Javelin"        "Cadillac Fleetwood" "Camaro Z28"        </span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt; [4] "Chrysler Imperial"  "Datsun 710"         "Dodge Challenger"</span></a>
<a class="sourceLine" id="cb7-17" title="17"></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co"># retrieve data for rows with id "Datsun 710"</span></a>
<a class="sourceLine" id="cb7-19" title="19">task_mtcars<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="dt">rows =</span> <span class="st">"Datsun 710"</span>)</a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt;      mpg   cyl  disp</span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt;    &lt;num&gt; &lt;num&gt; &lt;num&gt;</span></a>
<a class="sourceLine" id="cb7-22" title="22"><span class="co">#&gt; 1:  22.8     4   108</span></a></code></pre></div>
<p>Note that the method <code>$data()</code> is only an accessor and does not modify the underlying data/task.</p>
<p>Analogously, each column has an identifier, which is often just called column name. These are stored in the public fields <code>feature_names</code> and <code>target_names</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">task_iris<span class="op">$</span>feature_names</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; [1] "Petal.Length" "Petal.Width"  "Sepal.Length" "Sepal.Width"</span></a>
<a class="sourceLine" id="cb8-3" title="3">task_iris<span class="op">$</span>target_names</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; [1] "Species"</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co"># retrieve data for rows 1, 51, and 101 and only select column "Species"</span></a>
<a class="sourceLine" id="cb8-7" title="7">task_iris<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="dt">rows =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">51</span>, <span class="dv">101</span>), <span class="dt">cols =</span> <span class="st">"Species"</span>)</a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt;       Species</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt;        &lt;fctr&gt;</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; 1:     setosa</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt; 2: versicolor</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; 3:  virginica</span></a></code></pre></div>
<p>To retrieve the complete data set, e.g. for a closer inspection, convert to a <code><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(<span class="kw"><a href="../reference/as.data.table.html">as.data.table</a></span>(task_iris))</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#&gt;        Species    Petal.Length    Petal.Width     Sepal.Length  </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#&gt;  setosa    :50   Min.   :1.000   Min.   :0.100   Min.   :4.300  </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;  versicolor:50   1st Qu.:1.600   1st Qu.:0.300   1st Qu.:5.100  </span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt;  virginica :50   Median :4.350   Median :1.300   Median :5.800  </span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt;                  Mean   :3.758   Mean   :1.199   Mean   :5.843  </span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt;                  3rd Qu.:5.100   3rd Qu.:1.800   3rd Qu.:6.400  </span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt;                  Max.   :6.900   Max.   :2.500   Max.   :7.900  </span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt;   Sepal.Width   </span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt;  Min.   :2.000  </span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt;  1st Qu.:2.800  </span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt;  Median :3.000  </span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt;  Mean   :3.057  </span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">#&gt;  3rd Qu.:3.300  </span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">#&gt;  Max.   :4.400</span></a></code></pre></div>
</div>
<div id="roles" class="section level3">
<h3 class="hasAnchor">
<a href="#roles" class="anchor"></a>Roles</h3>
<p>It is possible to assign special roles to (subsets of) rows and columns.</p>
<p>For example, the previously constructed mtcars task has the following column roles:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">task_mtcars<span class="op">$</span>col_roles</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">#&gt; $feature</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; [1] "cyl"  "disp"</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; $target</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt; [1] "mpg"</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; $label</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt; $order</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt; $groups</span></a>
<a class="sourceLine" id="cb10-15" title="15"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co">#&gt; $weights</span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="co">#&gt; character(0)</span></a></code></pre></div>
<p>Now, we want the original <code><a href="https://www.rdocumentation.org/packages/base/topics/colnames">rownames()</a></code> of <code>mtcars</code> to be a regular feature column. Thus, we first pre-process the <code>data.frame</code> and then re-create the task.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(<span class="st">"data.table"</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="co"># with `keep.rownames`, data.table stores the row names in an extra column "rn"</span></a>
<a class="sourceLine" id="cb11-3" title="3">data =<span class="st"> </span><span class="kw"><a href="../reference/as.data.table.html">as.data.table</a></span>(mtcars[, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">keep.rownames =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-4" title="4">task =<span class="st"> </span>TaskRegr<span class="op">$</span><span class="kw">new</span>(<span class="dt">id =</span> <span class="st">"cars"</span>, <span class="dt">backend =</span> data, <span class="dt">target =</span> <span class="st">"mpg"</span>)</a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co"># we now have integer row_ids</span></a>
<a class="sourceLine" id="cb11-7" title="7">task<span class="op">$</span>row_ids</a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt; [24] 24 25 26 27 28 29 30 31 32</span></a>
<a class="sourceLine" id="cb11-10" title="10"></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co"># there is a new "feature" called "rn"</span></a>
<a class="sourceLine" id="cb11-12" title="12">task<span class="op">$</span>feature_names</a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt; [1] "cyl"  "disp" "rn"</span></a></code></pre></div>
<p>The column “rn” is now a regular feature. As this is a unique string column, most machine learning algorithms will have problems to process this feature without some kind of preprocessing. However, we still might want to carry <code>rn</code> around for different reasons. E.g., we can use the row names in plots or to associate outliers with the row names. This being said, we need to change the role of the row names column <code>rn</code> and remove it from the set of active features.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">task<span class="op">$</span>feature_names</a>
<a class="sourceLine" id="cb12-2" title="2"><span class="co">#&gt; [1] "cyl"  "disp" "rn"</span></a>
<a class="sourceLine" id="cb12-3" title="3">task<span class="op">$</span><span class="kw">set_col_role</span>(<span class="st">"rn"</span>, <span class="dt">new_roles =</span> <span class="st">"label"</span>)</a>
<a class="sourceLine" id="cb12-4" title="4"></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co"># "rn" not listed as feature any more</span></a>
<a class="sourceLine" id="cb12-6" title="6">task<span class="op">$</span>feature_names</a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; [1] "cyl"  "disp"</span></a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co"># also vanished from "data" and "head"</span></a>
<a class="sourceLine" id="cb12-10" title="10">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="dt">rows =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt;      mpg   cyl  disp</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt;    &lt;num&gt; &lt;num&gt; &lt;num&gt;</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; 1:    21     6   160</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">#&gt; 2:    21     6   160</span></a>
<a class="sourceLine" id="cb12-15" title="15">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">#&gt;      mpg   cyl  disp</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">#&gt;    &lt;num&gt; &lt;num&gt; &lt;num&gt;</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">#&gt; 1:    21     6   160</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">#&gt; 2:    21     6   160</span></a></code></pre></div>
<p>Note that no copies of the underlying data is inflicted by this operation. By changing roles, only the view on the data is changed, not the data itself.</p>
<p>Just like columns, it is also possible to assign different roles to rows. Rows can have two different roles:</p>
<ol style="list-style-type: decimal">
<li>Role <code>"use"</code>: Rows that are generally available for model fitting (although they may also be used as test set in resampling). This is the default role.</li>
<li>Role <code>"validation"</code>: Rows that are held back (see below). Rows which have missing values in the target column upon task creation are automatically moved to the validation set.</li>
</ol>
<p>There are several reasons to hold some observations back or treat them differently:</p>
<ol style="list-style-type: decimal">
<li>It is often good practice to validate the final model on an external validation set to uncover possible overfitting</li>
<li>Some observations may be unlabeled, e.g. in data mining cups or <a href="https://www.kaggle.com/">Kaggle</a> competitions. These observations cannot be used for training a model, but you can still predict labels.</li>
</ol>
</div>
<div id="task-mutators" class="section level3">
<h3 class="hasAnchor">
<a href="#task-mutators" class="anchor"></a>Task Mutators</h3>
<p>The methods <code>set_col_role()</code> and <code>set_row_role()</code> change the view on the data and can be used to subset the task. For convenience, the method <code><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter()</a></code> subsets the task based on row ids, and <code>select()</code> subsets the task based on feature names. All these operations only change the view on the data, without creating a copy of it, but modify the task in-place.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">task =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="st">"iris"</span>)</a>
<a class="sourceLine" id="cb13-2" title="2">task<span class="op">$</span><span class="kw">select</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sepal.Width"</span>, <span class="st">"Sepal.Length"</span>)) <span class="co"># keep only these features</span></a>
<a class="sourceLine" id="cb13-3" title="3">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) <span class="co"># keep only these rows</span></a>
<a class="sourceLine" id="cb13-4" title="4">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt;    Species Sepal.Length Sepal.Width</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt;     &lt;fctr&gt;        &lt;num&gt;       &lt;num&gt;</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; 1:  setosa          5.1         3.5</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt; 2:  setosa          4.9         3.0</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt; 3:  setosa          4.7         3.2</span></a></code></pre></div>
<p>Additionally, the methods <code><a href="https://www.rdocumentation.org/packages/data.table/topics/rbindlist">rbind()</a></code> and <code><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind()</a></code> allow to add extra rows and columns to a task, respectively. The method <code>replace_features()</code> is a convenience wrapper around <code>select()</code> and <code><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind()</a></code>. Again, the original data set stored in the original <code><a href="../reference/DataBackend.html">mlr3::DataBackend</a></code> is not altered in any way.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table</a></span>(<span class="dt">foo =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])) <span class="co"># add column foo</span></a>
<a class="sourceLine" id="cb14-2" title="2">task<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co">#&gt;    Species Sepal.Length Sepal.Width    foo</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">#&gt;     &lt;fctr&gt;        &lt;num&gt;       &lt;num&gt; &lt;char&gt;</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#&gt; 1:  setosa          5.1         3.5      a</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#&gt; 2:  setosa          4.9         3.0      b</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; 3:  setosa          4.7         3.2      c</span></a></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#prerequisites">Prerequisites</a></li>
      <li><a href="#task-creation">Task Creation</a></li>
      <li><a href="#predefined-tasks">Predefined tasks</a></li>
      <li>
<a href="#task-api">Task API</a><ul class="nav nav-pills nav-stacked">
<li><a href="#retrieve-data">Retrieve Data</a></li>
      <li><a href="#roles">Roles</a></li>
      <li><a href="#task-mutators">Task Mutators</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl, Jakob Richter, Giuseppe Casalicchio, Patrick Schratz, Stefan Coors, Quay Au.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   

  </body>
</html>
