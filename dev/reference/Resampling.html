<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Resampling Class — Resampling • mlr3</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Resampling Class — Resampling" />
<meta property="og:description" content="This is the abstract base class for resampling objects like ResamplingCV and ResamplingBootstrap.
The objects of this class define how a task is partitioned for resampling (e.g., in resample() or benchmark()),
using a set of hyperparameters such as the number of folds in cross-validation.
Resampling objects can be instantiated on a Task, which applies the strategy on the task and manifests in a
fixed partition of row_ids of the Task.
Predefined resamplings are stored in the mlr3misc::Dictionary mlr_resamplings,
e.g. cv or bootstrap." />
<meta property="og:image" content="https://mlr3.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mlr3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Version">0.1.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fab fa fab fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Resampling Class</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3/blob/master/R/Resampling.R'><code>R/Resampling.R</code></a></small>
    <div class="hidden name"><code>Resampling.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the abstract base class for resampling objects like <a href='ResamplingCV.html'>ResamplingCV</a> and <a href='ResamplingBootstrap.html'>ResamplingBootstrap</a>.</p>
<p>The objects of this class define how a task is partitioned for resampling (e.g., in <code><a href='resample.html'>resample()</a></code> or <code><a href='benchmark.html'>benchmark()</a></code>),
using a set of hyperparameters such as the number of folds in cross-validation.</p>
<p>Resampling objects can be instantiated on a <a href='Task.html'>Task</a>, which applies the strategy on the task and manifests in a
fixed partition of <code>row_ids</code> of the <a href='Task.html'>Task</a>.</p>
<p>Predefined resamplings are stored in the <a href='https://mlr3misc.mlr-org.com/reference/Dictionary.html'>mlr3misc::Dictionary</a> <a href='mlr_resamplings.html'>mlr_resamplings</a>,
e.g. <code><a href='ResamplingCV.html'>cv</a></code> or <code><a href='ResamplingBootstrap.html'>bootstrap</a></code>.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><a href='https://rdrr.io/pkg/R6/man/R6Class.html'>R6::R6Class</a> object.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    

<p>Note: This object is typically constructed via a derived classes, e.g. <a href='ResamplingCV.html'>ResamplingCV</a> or <a href='ResamplingHoldout.html'>ResamplingHoldout</a>.</p><pre>r = Resampling$new(id, param_set, duplicated_ids = FALSE, man = NA_character_)
</pre>
<ul>
<li><p><code>id</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier for the resampling strategy.</p></li>
<li><p><code>param_set</code> :: <a href='https://paradox.mlr-org.com/reference/ParamSet.html'>paradox::ParamSet</a><br />
Set of hyperparameters.</p></li>
<li><p><code>duplicated_ids</code> :: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code><br />
Set to <code>TRUE</code> if this resampling strategy may have duplicated row ids in a single training set or test set.</p></li>
<li><p><code>man</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
String in the format <code>[pkg]::[topic]</code> pointing to a manual page for this object.</p></li>
</ul>

    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<p>All variables passed to the constructor, and additionally:</p><ul>
<li><p><code>iters</code> :: <code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Return the number of resampling iterations, depending on the values stored in the <code>param_set</code>.</p></li>
<li><p><code>instance</code> :: <code>any</code><br />
During <code>instantiate()</code>, the instance is stored in this slot.
The instance can be in any arbitrary format.</p></li>
<li><p><code>is_instantiated</code> :: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code><br />
Is <code>TRUE</code>, if the resampling has been instantiated.</p></li>
<li><p><code>task_hash</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
The hash of the <a href='Task.html'>Task</a> which was passed to <code>r$instantiate()</code>.</p></li>
<li><p><code>task_nrow</code> :: <code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
The number of observations of the <a href='Task.html'>Task</a> which was passed to <code>r$instantiate()</code>.</p></li>
<li><p><code>hash</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Hash (unique identifier) for this object.</p>
<p>E.g., this is <code>TRUE</code> for Bootstrap, and <code>FALSE</code> for cross validation.
Only used internally.</p></li>
</ul>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p><code>instantiate(task)</code><br />
<a href='Task.html'>Task</a> -&gt; <code>self</code><br />
Materializes fixed training and test splits for a given task and stores them in <code>r$instance</code>.</p></li>
<li><p><code>train_set(i)</code><br />
<code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code> -&gt; (<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code> | <code><a href='https://rdrr.io/r/base/character.html'>character()</a></code>)<br />
Returns the row ids of the i-th training set.</p></li>
<li><p><code>test_set(i)</code><br />
<code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code> -&gt; (<code><a href='https://rdrr.io/r/base/integer.html'>integer()</a></code> | <code><a href='https://rdrr.io/r/base/character.html'>character()</a></code>)<br />
Returns the row ids of the i-th test set.</p></li>
<li><p><code><a href='https://rdrr.io/r/utils/help.html'>help()</a></code><br />
() -&gt; <code>NULL</code><br />
Opens the corresponding help page referenced by <code>$man</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="stratification"><a class="anchor" href="#stratification"></a>Stratification</h2>

    

<p>All derived classes support stratified sampling.
The stratification variables are assumed to be discrete and must be stored in the <a href='Task.html'>Task</a> with column role <code>"stratum"</code>.
In case of multiple stratification variables, each combination of the values of the stratification variables forms a strata.</p>
<p>First, the observations are divided into subpopulations based one or multiple stratification variables (assumed to be discrete), c.f. <code>task$strata</code>.</p>
<p>Second, the sampling is performed in each of the <code>k</code> subpopulations separately.
Each subgroup is divided into <code>iter</code> training sets and <code>iter</code> test sets by the derived <code>Resampling</code>.
These sets are merged based on their iteration number: all training sets from all subpopulations with iteration 1 are combined, then all training sets with iteration 2, and so on.
Same is done for all test sets.
The merged sets can be accessed via <code>$train_set(i)</code> and <code>$test_set(i)</code>, respectively.</p>
    <h2 class="hasAnchor" id="grouping-blocking"><a class="anchor" href="#grouping-blocking"></a>Grouping / Blocking</h2>

    

<p>All derived classes support grouping of observations.
The grouping variable is assumed to be discrete and must be stored in the <a href='Task.html'>Task</a> with column role <code>"group"</code>.</p>
<p>Observations in the same group are treated like a "block" of observations which must be kept together.
These observations either all go together into the training set or together into the test set.</p>
<p>The sampling is performed by the derived Resampling on the grouping variable.
Next, the grouping information is replaced with the respective row ids to generate training and test sets.
The sets can be accessed via <code>$train_set(i)</code> and <code>$test_set(i)</code>, respectively.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='https://mlr3misc.mlr-org.com/reference/Dictionary.html'>Dictionary</a> of Resamplings: <a href='mlr_resamplings.html'>mlr_resamplings</a></p>
<p><code><a href='as.data.table.html'>as.data.table(mlr_resamplings)</a></code> for a complete table of all (also dynamically created) Resampling implementations.</p>
<p>Other Resampling: 
<code><a href='mlr_resamplings.html'>mlr_resamplings</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>r</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>rsmp</a></span>(<span class='st'>"subsampling"</span>)

<span class='co'># Default parametrization</span>
<span class='no'>r</span>$<span class='no'>param_set</span>$<span class='no'>values</span></div><div class='output co'>#&gt; $repeats
#&gt; [1] 30
#&gt; 
#&gt; $ratio
#&gt; [1] 0.6666667
#&gt; </div><div class='input'>
<span class='co'># Do only 3 repeats on 10% of the data</span>
<span class='no'>r</span>$<span class='no'>param_set</span>$<span class='no'>values</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>ratio</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>repeats</span> <span class='kw'>=</span> <span class='fl'>3</span>)
<span class='no'>r</span>$<span class='no'>param_set</span>$<span class='no'>values</span></div><div class='output co'>#&gt; $ratio
#&gt; [1] 0.1
#&gt; 
#&gt; $repeats
#&gt; [1] 3
#&gt; </div><div class='input'>
<span class='co'># Instantiate on iris task</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)
<span class='no'>r</span>$<span class='fu'>instantiate</span>(<span class='no'>task</span>)

<span class='co'># Extract train/test sets</span>
<span class='no'>train_set</span> <span class='kw'>=</span> <span class='no'>r</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>)
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>train_set</span>)</div><div class='output co'>#&gt;  [1]  17  65  39  21 145 115  58  81  50 124  90  95  85 114  69</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/sets.html'>intersect</a></span>(<span class='no'>train_set</span>, <span class='no'>r</span>$<span class='fu'>test_set</span>(<span class='fl'>1</span>))</div><div class='output co'>#&gt; integer(0)</div><div class='input'>
<span class='co'># Another example: 10-fold CV</span>
<span class='no'>r</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>rsmp</a></span>(<span class='st'>"cv"</span>)$<span class='fu'>instantiate</span>(<span class='no'>task</span>)
<span class='no'>r</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>)</div><div class='output co'>#&gt;   [1]   5  15  29  55  57  58  59  64  71  75  99 102 115 126 142  14  18  27
#&gt;  [19]  47  51  70  72  81  96  97 107 112 116 123 128   7   8  10  21  23  35
#&gt;  [37]  36  62  65  73  78  95 108 124 137   4  12  13  22  34  76  89  90  93
#&gt;  [55] 104 131 134 135 145 149   2   6  19  20  30  31  60  84  92 117 118 132
#&gt;  [73] 133 141 147   1   9  32  33  44  50  68  79  80  82 109 127 129 139 144
#&gt;  [91]  16  24  37  43  46  54  67  69  87 100 119 122 130 136 148  17  25  38
#&gt; [109]  39  41  48  61  66  85  86  98 105 114 143 150  11  26  28  49  52  74
#&gt; [127]  77  83  88 101 103 110 111 120 146</div><div class='input'>
<span class='co'># Stratification</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>tsk</a></span>(<span class='st'>"pima"</span>)
<span class='fu'><a href='https://rdrr.io/r/base/prop.table.html'>prop.table</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>task</span>$<span class='fu'>truth</span>())) <span class='co'># moderately unbalanced</span></div><div class='output co'>#&gt; 
#&gt;       pos       neg 
#&gt; 0.3489583 0.6510417 </div><div class='input'><span class='no'>task</span>$<span class='no'>col_roles</span>$<span class='no'>stratum</span> <span class='kw'>=</span> <span class='no'>task</span>$<span class='no'>target_names</span>

<span class='no'>r</span> <span class='kw'>=</span> <span class='fu'><a href='mlr_sugar.html'>rsmp</a></span>(<span class='st'>"subsampling"</span>)
<span class='no'>r</span>$<span class='fu'>instantiate</span>(<span class='no'>task</span>)
<span class='fu'><a href='https://rdrr.io/r/base/prop.table.html'>prop.table</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>task</span>$<span class='fu'>truth</span>(<span class='no'>r</span>$<span class='fu'>train_set</span>(<span class='fl'>1</span>)))) <span class='co'># roughly same proportion</span></div><div class='output co'>#&gt; 
#&gt;       pos       neg 
#&gt; 0.3496094 0.6503906 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#format">Format</a></li>
      <li><a href="#construction">Construction</a></li>
      <li><a href="#fields">Fields</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#stratification">Stratification</a></li>
      <li><a href="#grouping-blocking">Grouping / Blocking</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl, Jakob Richter, Patrick Schratz, Martin Binder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '9c3abd63d461245fb19ebd2d2645c5b0',
    indexName: 'mlr3',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


